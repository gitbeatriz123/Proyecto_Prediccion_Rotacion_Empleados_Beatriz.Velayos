<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Memoria del Proyecto — Predicción de Rotación</title>
<style>
  body{ font-family: Arial, Helvetica, sans-serif; line-height:1.5; color:#222; margin:40px; }
  h1{ font-size: 26px; margin:0 0 .4rem 0; }
  h2{ font-size: 19px; margin:1.2rem 0 .2rem 0; border-bottom:1px solid #ddd; padding-bottom:.2rem;}
  p,li{ font-size:14px; }
  code, pre{ font-family: "Courier New", monospace; font-size:13px; }
  .kpi{ background:#f4f4f4; border:1px solid #e3e3e3; border-radius:6px; padding:6px 10px; display:inline-block; margin:4px 8px 4px 0;}
  ul{ margin-top:.2rem; }
</style>
</head>
<body>
<h1>Memoria del Proyecto — Predicción de Rotación de Empleados</h1>
<p><strong>Autora:</strong> Beatriz Velayos · <strong>Bootcamp Big Data · AI · ML</strong> · <strong>Tag:</strong> v1.0-entrega</p>

<h2>1. Resumen</h2>
<p>Pipeline reproducible (Docker) para predecir rotación (attrition) y explicar <em>drivers</em>. Incluye ingesta/ETL con PySpark, modelado (scikit-learn), persistencia de métricas y dashboard en Power BI. Notebooks exportados a HTML y esta memoria en PDF.</p>

<h2>2. Objetivo</h2>
<ul>
  <li>Estimar riesgo de baja por empleado.</li>
  <li>Explicar factores clave (drivers) y KPIs para RR. HH.</li>
</ul>

<h2>3. Datos</h2>
<ul>
  <li>WA HR Attrition (1.470 filas), objetivo: <code>Attrition</code> (Yes/No).</li>
  <li>Encuesta de clima (Engagement, Satisfaction, WorkLifeBalanceSurvey, ManagerRelationship, RemoteWorkSatisfaction) unida por <code>EmployeeNumber</code>.</li>
</ul>
<p class="kpi"><strong>Filas finales:</strong> 1.470</p>
<p class="kpi"><strong>Attrition positivo:</strong> 237</p>
<p class="kpi"><strong>Tasa:</strong> 0,1612</p>

<h2>4. Metodología</h2>
<p><strong>EDA</strong>: nulos, duplicados, dominios; nuevas features (<code>overtime_flag</code>, <code>income_yearly</code>, <code>tenure_ratio</code>).<br>
<strong>ETL (PySpark)</strong>: limpieza + join → Parquet.<br>
<strong>Modelos</strong>: Regresión Logística (pipeline con escalado + OneHot) y Random Forest. Métricas: ROC-AUC, PR-AUC y F1 con umbral óptimo.</p>

<h2>5. Resultados</h2>
<ul>
  <li><strong>LogReg</strong> — AUC 0.8173 · PR-AUC 0.5627 · F1* 0.5286 · thr* 0.7324</li>
  <li><strong>RF</strong> — AUC 0.8051 · PR-AUC 0.5364 · F1* 0.5348 · thr* 0.22</li>
</ul>
<p>La LogReg ofrece mejor ROC-AUC y explicabilidad directa (coeficientes). Drivers y KPIs se muestran en el dashboard.</p>

<h2>6. Dashboard (Power BI)</h2>
<ul>
  <li><strong>Resumen & KPIs</strong>: métricas principales y guía rápida.</li>
  <li><strong>Segmentos & Drivers</strong>: Top-N coeficientes (LogReg) con signo.</li>
  <li><strong>Departamentos / Job Roles</strong>: comparativas.</li>
</ul>

<h2>7. Reproducibilidad</h2>
<pre><code>docker compose up -d
docker compose run --rm jupyter python /scripts/preprocess.py \
  --input /data/processed/employee_attrition.parquet \
  --out /output/models/transformer.joblib
docker compose run --rm jupyter python /scripts/train_ml.py \
  --input /data/processed/employee_attrition.parquet --model logreg
docker compose run --rm jupyter python /scripts/train_ml.py \
  --input /data/processed/employee_attrition.parquet --model rf
</code></pre>

<h2>8. Limitaciones y futuro</h2>
<ul>
  <li>Datos de un único corte; faltan variables temporales/comportamiento.</li>
  <li>Ajuste de umbral por coste de error y monitorización en producción.</li>
</ul>

<h2>9. Conclusión</h2>
<p>Se cumple el objetivo de negocio con un sistema reproducible y un dashboard interpretable (AUC≈0,82) para priorizar acciones de retención.</p>
</body>
</html>
